"""
Liv - International Support Specialist Agent

Following rule #2: Create modular agent components for easy maintenance
Following rule #3: Component documentation explaining purpose and functionality
Following rule #12: Complete code verification with proper agent implementation

Liv specializes in supporting international professionals with credential recognition,
visa guidance, cultural integration, and navigating climate career opportunities.

Location: backendv1/agents/liv/agent.py
"""

from typing import Dict, Any, List
from datetime import datetime

from backendv1.agents.base.agent_base import AgentBase, AgentContext, AgentResponse
from backendv1.agents.base.memory_system import MemorySystem
from backendv1.agents.base.reflection_engine import ReflectionEngine
from backendv1.utils.logger import setup_logger
from .prompts import (
    LIV_SYSTEM_PROMPT,
    CREDENTIAL_EVALUATION_PROMPT,
    VISA_SUPPORT_PROMPT,
    CULTURAL_INTEGRATION_PROMPT,
    LIV_CONFIG,
)

logger = setup_logger("liv_agent")


class LivAgent(AgentBase):
    """
    Liv - International Support Specialist

    Specialized in:
    - Credential recognition and evaluation
    - Visa and immigration guidance for climate careers
    - Cultural integration and professional adaptation
    - International networking and mentorship
    - Cross-cultural communication and workplace navigation
    """

    def __init__(self, agent_name: str, agent_type: str, **kwargs):
        """Initialize Liv with memory and reflection capabilities"""
        super().__init__(agent_name, agent_type, **kwargs)
        self.memory_system = MemorySystem(agent_name)
        self.reflection_engine = ReflectionEngine(agent_name)

    def _load_prompts(self):
        """Load Liv-specific prompts and templates"""
        self.system_prompt = LIV_SYSTEM_PROMPT

        self.specialized_prompts = {
            "credential_recognition": CREDENTIAL_EVALUATION_PROMPT,
            "visa_guidance": VISA_SUPPORT_PROMPT,
            "cultural_integration": CULTURAL_INTEGRATION_PROMPT,
            "international_networking": "Let's build your professional network in the climate sector...",
        }

    def _load_tools(self):
        """Load and configure Liv-specific tools"""
        self.available_tools = [
            "credential_evaluator",
            "visa_pathway_analyzer",
            "cultural_integration_guide",
            "international_network_builder",
            "professional_licensing_navigator",
            "language_skills_assessor",
            "global_climate_job_finder",
            "cross_cultural_communication_coach",
        ]

    def _setup_capabilities(self):
        """Set up Liv-specific capabilities and configurations"""
        self.specialization_areas = [
            "credential_recognition",
            "visa_immigration_guidance",
            "cultural_integration",
            "international_networking",
            "professional_licensing",
            "language_support",
            "global_career_navigation",
            "cross_cultural_communication",
        ]

        self.expertise_level = "expert"
        self.confidence_threshold = 0.8

    async def process_message(self, message: str, context: AgentContext) -> AgentResponse:
        """
        Process user message and provide international support guidance

        Following rule #6: Asynchronous data handling for performance
        Following rule #15: Include comprehensive error handling

        Args:
            message: User's message
            context: Conversation context

        Returns:
            AgentResponse: Liv's specialized response
        """
        try:
            logger.info(
                f"üåç Liv processing international support message for user {context.user_id}"
            )

            # Store interaction in memory
            await self.memory_system.store_episode(
                {
                    "type": "international_support_interaction",
                    "message": message,
                    "user_id": context.user_id,
                    "context": "international_professional_guidance",
                }
            )

            # Analyze message for international support intent
            intent = await self._analyze_international_intent(message)

            # Generate specialized response based on intent
            if intent == "credential_recognition":
                response_content = await self._provide_credential_guidance(message, context)
            elif intent == "visa_guidance":
                response_content = await self._provide_visa_guidance(message, context)
            elif intent == "cultural_integration":
                response_content = await self._provide_cultural_integration_guidance(
                    message, context
                )
            elif intent == "international_networking":
                response_content = await self._provide_networking_guidance(message, context)
            elif intent == "language_support":
                response_content = await self._provide_language_support(message, context)
            else:
                response_content = await self._provide_general_international_guidance(
                    message, context
                )

            # Calculate confidence score
            confidence = await self._calculate_confidence(message, intent)

            # Identify next actions
            next_actions = await self._suggest_next_actions(intent, context)

            # Create response
            response = AgentResponse(
                content=response_content,
                specialist_type="international_specialist",
                confidence_score=confidence,
                tools_used=[
                    "credential_evaluator",
                    "visa_pathway_analyzer",
                    "cultural_integration_guide",
                ],
                next_actions=next_actions,
                sources=[
                    "International Credential Services",
                    "Immigration Resources",
                    "Global Climate Networks",
                ],
                metadata={
                    "intent": intent,
                    "specialization": "international_professional_support",
                    "expertise_areas": self.specialization_areas,
                },
            )

            # Reflect on interaction
            await self.reflection_engine.reflect_on_interaction(
                {
                    "id": f"liv_{datetime.utcnow().timestamp()}",
                    "user_message": message,
                    "response": response_content,
                    "intent": intent,
                    "confidence": confidence,
                }
            )

            return response

        except Exception as e:
            logger.error(f"Error in Liv's message processing: {e}")
            return AgentResponse(
                content="I apologize, but I'm experiencing a technical issue with my international support systems. Let me connect you with immigration attorneys and international professional organizations who can provide the guidance you need.",
                specialist_type="international_specialist",
                success=False,
                error_message=str(e),
            )

    async def _analyze_international_intent(self, message: str) -> str:
        """Analyze user message to determine international support intent"""
        message_lower = message.lower()

        if any(
            term in message_lower
            for term in ["credential", "degree", "certification", "recognition", "evaluation"]
        ):
            return "credential_recognition"
        elif any(
            term in message_lower
            for term in ["visa", "immigration", "work permit", "green card", "citizenship"]
        ):
            return "visa_guidance"
        elif any(
            term in message_lower
            for term in ["culture", "adaptation", "integration", "workplace", "communication"]
        ):
            return "cultural_integration"
        elif any(
            term in message_lower
            for term in ["network", "connections", "mentorship", "community", "professional"]
        ):
            return "international_networking"
        elif any(
            term in message_lower
            for term in ["language", "english", "communication", "speaking", "writing"]
        ):
            return "language_support"
        else:
            return "general_guidance"

    async def _provide_credential_guidance(self, message: str, context: AgentContext) -> str:
        """Provide credential recognition and evaluation guidance"""
        return """üìú **International Credential Recognition for Climate Careers**

Welcome! I understand the challenges of having your international qualifications recognized. Let me guide you through the credential evaluation process for climate careers in the US.

**üéì Understanding Credential Evaluation:**

**Types of Evaluations:**
‚Ä¢ **Course-by-Course**: Detailed analysis of each course and grade
‚Ä¢ **Document-by-Document**: Evaluation of each credential separately
‚Ä¢ **General**: Overall equivalency to US education system
‚Ä¢ **Professional**: Specific to licensing requirements in your field

**When You Need Evaluations:**
‚Ä¢ Applying for jobs that require specific degrees
‚Ä¢ Pursuing additional education or certifications
‚Ä¢ Obtaining professional licenses
‚Ä¢ Applying for certain visa categories
‚Ä¢ Meeting employer requirements

**üè¢ Credential Evaluation Services:**

**NACES Member Organizations (Recommended):**
‚Ä¢ **World Education Services (WES)**: Most widely recognized
‚Ä¢ **Educational Credential Evaluators (ECE)**: Detailed evaluations
‚Ä¢ **International Education Research Foundation (IERF)**: Comprehensive service
‚Ä¢ **Academic Evaluation Services (AES)**: Fast processing
‚Ä¢ **Foreign Academic Credential Service (FACS)**: Specialized service

**Evaluation Process:**
```
Step 1: Choose evaluation service based on your needs
Step 2: Submit application and required documents
Step 3: Pay evaluation fees ($100-$300 typically)
Step 4: Wait for processing (2-8 weeks)
Step 5: Receive evaluation report
Step 6: Submit to employers/institutions as needed
```

**üåç Climate-Specific Credential Considerations:**

**Engineering and Technical Fields:**
‚Ä¢ May require additional licensing through state boards
‚Ä¢ Professional Engineer (PE) license may be needed
‚Ä¢ ABET accreditation equivalency important
‚Ä¢ Consider Fundamentals of Engineering (FE) exam

**Environmental Science:**
‚Ä¢ Graduate degrees often preferred in climate sector
‚Ä¢ Consider additional certifications (LEED, sustainability)
‚Ä¢ Research experience and publications valuable
‚Ä¢ Laboratory skills and field experience important

**Business and Policy:**
‚Ä¢ MBA or policy degrees highly valued
‚Ä¢ Consider additional certifications in sustainability
‚Ä¢ Language skills and cultural competency are assets
‚Ä¢ International experience is often an advantage

**üí° Maximizing Your International Background:**

**Highlighting Global Experience:**
```
Instead of: "I have a degree from [country]"
Say: "I bring international perspective on climate challenges and solutions from my education and experience in [country]"

Instead of: "My credentials are different"
Say: "My diverse educational background provides unique insights into global climate issues"
```

**Leveraging Cultural Knowledge:**
‚Ä¢ Emphasize understanding of global climate impacts
‚Ä¢ Highlight experience with international collaboration
‚Ä¢ Showcase multilingual and multicultural competencies
‚Ä¢ Connect your background to specific climate challenges

**üìã Document Preparation Checklist:**
```
Required Documents (varies by service):
‚ñ° Official transcripts in original language
‚ñ° Official English translations (if needed)
‚ñ° Degree certificates/diplomas
‚ñ° Course descriptions/syllabi (if available)
‚ñ° Professional licenses (if applicable)
‚ñ° Identity verification documents
‚ñ° Application forms and fees
```

**üöÄ Beyond Credential Evaluation:**

**Additional Steps for Climate Careers:**
‚Ä¢ Research specific employer requirements
‚Ä¢ Consider additional US certifications or training
‚Ä¢ Join professional associations in your field
‚Ä¢ Attend climate conferences and networking events
‚Ä¢ Consider informational interviews with hiring managers

**Professional Development:**
‚Ä¢ Take courses to fill any knowledge gaps
‚Ä¢ Obtain US-specific certifications (PMP, LEED, etc.)
‚Ä¢ Develop familiarity with US regulations and standards
‚Ä¢ Build portfolio of US-relevant work or volunteer experience

**üåü Success Stories:**
Many international professionals have successfully transitioned to climate careers by:
‚Ä¢ Combining international credentials with US certifications
‚Ä¢ Emphasizing unique global perspectives
‚Ä¢ Building strong professional networks
‚Ä¢ Continuously learning about US climate policy and markets

**üíº Employer Education:**
Sometimes you may need to help employers understand:
‚Ä¢ The value of international education and experience
‚Ä¢ How your background brings unique perspectives
‚Ä¢ The equivalency of your credentials
‚Ä¢ Your commitment to professional development

**üìû Additional Resources:**
‚Ä¢ **USCIS**: Immigration-related credential questions
‚Ä¢ **State Licensing Boards**: Professional licensing requirements
‚Ä¢ **Professional Associations**: Field-specific guidance
‚Ä¢ **Career Services**: University and community resources

Remember: Your international background is an asset in the global climate movement. Many employers value diverse perspectives and international experience in addressing climate challenges.

What specific credentials do you need evaluated, and what type of climate role are you targeting? I can provide more targeted guidance based on your situation."""

    async def _provide_visa_guidance(self, message: str, context: AgentContext) -> str:
        """Provide visa and immigration guidance for climate careers"""
        return """üõÇ **Visa and Immigration Pathways for Climate Careers**

Navigating US immigration for climate work can be complex, but there are several pathways available. Let me guide you through the options:

**‚ö†Ô∏è Important Disclaimer:**
This is general information only. Always consult with a qualified immigration attorney for personalized advice about your specific situation.

**üéØ Common Visa Categories for Climate Professionals:**

**Employment-Based Visas:**

**H-1B (Specialty Occupation):**
‚Ä¢ Requires bachelor's degree or equivalent
‚Ä¢ Employer must sponsor and file petition
‚Ä¢ Annual cap with lottery system (65,000 + 20,000 for advanced degrees)
‚Ä¢ 3-year initial period, renewable once
‚Ä¢ Path to green card possible

**L-1 (Intracompany Transfer):**
‚Ä¢ Must work for same company abroad for 1+ years
‚Ä¢ L-1A for managers/executives, L-1B for specialized knowledge
‚Ä¢ No annual cap
‚Ä¢ Can lead to green card through EB-1C category

**O-1 (Extraordinary Ability):**
‚Ä¢ For individuals with extraordinary ability in sciences, arts, business
‚Ä¢ High standard of evidence required
‚Ä¢ No annual cap
‚Ä¢ Renewable indefinitely

**TN (NAFTA Professionals - Canada/Mexico):**
‚Ä¢ Specific list of qualifying professions
‚Ä¢ Renewable indefinitely
‚Ä¢ No path to green card directly

**üå± Climate-Specific Opportunities:**

**STEM Fields Advantage:**
‚Ä¢ 24-month STEM OPT extension for F-1 students
‚Ä¢ Priority processing for certain STEM fields
‚Ä¢ Growing demand for climate science and engineering expertise

**Research and Academia:**
‚Ä¢ J-1 research scholar programs
‚Ä¢ University sponsorship opportunities
‚Ä¢ Collaboration with climate research institutions

**Nonprofit Sector:**
‚Ä¢ Many climate organizations can sponsor visas
‚Ä¢ Mission-driven work often valued by immigration officers
‚Ä¢ Potential for National Interest Waiver arguments

**üíö Green Card Pathways:**

**Employment-Based Categories:**

**EB-1 (Priority Workers):**
‚Ä¢ EB-1A: Extraordinary ability (self-petition possible)
‚Ä¢ EB-1B: Outstanding professors/researchers
‚Ä¢ EB-1C: Multinational executives/managers
‚Ä¢ No labor certification required
‚Ä¢ Current priority dates

**EB-2 (Advanced Degree/Exceptional Ability):**
‚Ä¢ Requires advanced degree or exceptional ability
‚Ä¢ Labor certification usually required
‚Ä¢ National Interest Waiver (NIW) possible for climate work
‚Ä¢ Longer wait times for some countries

**EB-3 (Skilled Workers):**
‚Ä¢ Bachelor's degree or 2+ years experience
‚Ä¢ Labor certification required
‚Ä¢ Longer processing times

**üåü National Interest Waiver (NIW) for Climate Work:**

**Strong NIW Arguments for Climate Professionals:**
‚Ä¢ Climate change as urgent national priority
‚Ä¢ Shortage of qualified climate professionals
‚Ä¢ Economic benefits of clean energy transition
‚Ä¢ National security implications of climate resilience
‚Ä¢ Public health benefits of environmental protection

**Building Your NIW Case:**
‚Ä¢ Document your expertise and achievements
‚Ä¢ Gather letters from experts in your field
‚Ä¢ Demonstrate national scope of your work
‚Ä¢ Show how your work benefits the US broadly
‚Ä¢ Highlight urgency and importance of climate action

**üìã Visa Application Strategy:**

**Preparation Steps:**
```
1. Assess your qualifications and options
2. Gather required documentation
3. Find qualified immigration attorney
4. Prepare strong application package
5. Consider timing and strategic factors
6. Plan for potential delays or challenges
```

**Documentation Checklist:**
‚Ä¢ Educational credentials and evaluations
‚Ä¢ Employment letters and contracts
‚Ä¢ Evidence of expertise and achievements
‚Ä¢ Financial documentation
‚Ä¢ Medical examinations (if required)
‚Ä¢ Background checks and clearances

**ü§ù Finding Sponsoring Employers:**

**Climate Organizations That Sponsor:**
‚Ä¢ Environmental nonprofits and NGOs
‚Ä¢ Clean energy companies and startups
‚Ä¢ Government agencies (EPA, DOE, NOAA)
‚Ä¢ Research institutions and universities
‚Ä¢ Consulting firms specializing in sustainability

**Employer Considerations:**
‚Ä¢ Cost and complexity of visa sponsorship
‚Ä¢ Timeline for hiring international candidates
‚Ä¢ Experience with immigration processes
‚Ä¢ Commitment to diversity and inclusion

**üí° Maximizing Your Chances:**

**Strengthen Your Profile:**
‚Ä¢ Develop specialized climate expertise
‚Ä¢ Build strong professional network in US
‚Ä¢ Gain experience with US climate policies and markets
‚Ä¢ Obtain relevant certifications and training
‚Ä¢ Demonstrate English proficiency

**Strategic Timing:**
‚Ä¢ Apply early in fiscal year for cap-subject visas
‚Ä¢ Consider multiple application strategies
‚Ä¢ Plan for processing delays
‚Ä¢ Maintain legal status throughout process

**üåç Alternative Pathways:**

**International Programs:**
‚Ä¢ Fulbright Scholar Program
‚Ä¢ International visitor exchange programs
‚Ä¢ Research collaboration agreements
‚Ä¢ Multinational company transfers

**Investment-Based Options:**
‚Ä¢ EB-5 investor visa (requires significant investment)
‚Ä¢ E-2 treaty investor visa (for certain countries)
‚Ä¢ Starting climate-focused business

**üìû Professional Resources:**
‚Ä¢ **American Immigration Lawyers Association (AILA)**: Find qualified attorneys
‚Ä¢ **USCIS**: Official government information
‚Ä¢ **State Bar Associations**: Attorney referral services
‚Ä¢ **University International Offices**: Student and scholar support

**üî• Success Tips:**
‚Ä¢ Start planning early - immigration takes time
‚Ä¢ Work with experienced immigration attorney
‚Ä¢ Maintain detailed records of achievements
‚Ä¢ Build relationships with potential sponsors
‚Ä¢ Stay informed about policy changes
‚Ä¢ Consider multiple pathways simultaneously

Remember: Your international background and climate expertise are valuable assets. Many US organizations recognize the need for global perspectives in addressing climate challenges.

What's your current immigration status, and what type of climate role are you pursuing? I can provide more specific guidance based on your situation."""

    async def _provide_cultural_integration_guidance(
        self, message: str, context: AgentContext
    ) -> str:
        """Provide cultural integration and workplace adaptation guidance"""
        return """ü§ù **Cultural Integration and Professional Adaptation**

Adapting to a new professional culture while maintaining your identity can be challenging. Let me help you navigate workplace culture and communication in the US climate sector.

**üåç Understanding US Workplace Culture:**

**General Characteristics:**
‚Ä¢ Direct communication style (compared to many cultures)
‚Ä¢ Emphasis on individual achievement and initiative
‚Ä¢ Informal hierarchy in many organizations
‚Ä¢ Time-conscious and deadline-focused
‚Ä¢ Networking and relationship-building important

**Climate Sector Specifics:**
‚Ä¢ Mission-driven and values-oriented
‚Ä¢ Collaborative and interdisciplinary approach
‚Ä¢ Emphasis on innovation and problem-solving
‚Ä¢ Strong focus on data and evidence-based decisions
‚Ä¢ Growing emphasis on diversity, equity, and inclusion

**üí¨ Communication Strategies:**

**Professional Communication:**
```
Email Etiquette:
‚Ä¢ Clear, concise subject lines
‚Ä¢ Brief, direct messages
‚Ä¢ Professional but friendly tone
‚Ä¢ Prompt responses expected
‚Ä¢ Use of "please" and "thank you"

Meeting Culture:
‚Ä¢ Punctuality highly valued
‚Ä¢ Active participation encouraged
‚Ä¢ Speaking up and asking questions welcomed
‚Ä¢ Follow-up actions clearly defined
‚Ä¢ Virtual meetings common (especially post-COVID)
```

**Verbal Communication:**
‚Ä¢ Speak clearly and at moderate pace
‚Ä¢ Ask for clarification when needed
‚Ä¢ Share your perspectives and expertise
‚Ä¢ Use specific examples and data
‚Ä¢ Practice active listening

**Cross-Cultural Communication:**
‚Ä¢ Acknowledge your international perspective as an asset
‚Ä¢ Share relevant global examples and experiences
‚Ä¢ Ask questions about US-specific contexts
‚Ä¢ Be patient with cultural learning process
‚Ä¢ Find mentors who can guide you

**üè¢ Workplace Navigation:**

**Building Professional Relationships:**
‚Ä¢ Participate in team lunches and social events
‚Ä¢ Engage in small talk before meetings
‚Ä¢ Show interest in colleagues' work and backgrounds
‚Ä¢ Offer help and collaboration
‚Ä¢ Share appropriate personal information

**Performance and Feedback:**
‚Ä¢ US workplaces often provide direct feedback
‚Ä¢ Self-advocacy and promotion are expected
‚Ä¢ Document your achievements and contributions
‚Ä¢ Seek regular feedback from supervisors
‚Ä¢ Set clear goals and track progress

**Professional Development:**
‚Ä¢ Take initiative in identifying learning opportunities
‚Ä¢ Attend conferences, workshops, and training
‚Ä¢ Join professional associations
‚Ä¢ Seek mentorship and sponsorship
‚Ä¢ Build internal and external networks

**üåü Leveraging Your International Background:**

**Your Unique Value:**
‚Ä¢ Global perspective on climate challenges
‚Ä¢ Understanding of international markets and policies
‚Ä¢ Multilingual and multicultural competencies
‚Ä¢ Experience with diverse stakeholder groups
‚Ä¢ Fresh perspectives on US climate issues

**Sharing Your Expertise:**
```
Effective Ways to Contribute:
‚Ä¢ "In my experience working in [country], we addressed this challenge by..."
‚Ä¢ "From a global perspective, I've seen successful approaches that include..."
‚Ä¢ "My background in [region] gives me insight into..."
‚Ä¢ "International best practices suggest..."
```

**ü§ù Building Your Professional Network:**

**Networking Strategies:**
‚Ä¢ Attend climate conferences and events
‚Ä¢ Join professional associations in your field
‚Ä¢ Participate in international professional groups
‚Ä¢ Connect with other international professionals
‚Ä¢ Engage in online climate communities

**Mentorship and Support:**
‚Ä¢ Find mentors within your organization
‚Ä¢ Connect with other international professionals
‚Ä¢ Join diversity and inclusion groups
‚Ä¢ Seek reverse mentoring opportunities
‚Ä¢ Build relationships across different levels

**üè† Personal and Social Integration:**

**Community Involvement:**
‚Ä¢ Join local environmental organizations
‚Ä¢ Participate in community climate initiatives
‚Ä¢ Volunteer for causes you care about
‚Ä¢ Attend cultural events and festivals
‚Ä¢ Explore local outdoor and recreational activities

**Maintaining Cultural Identity:**
‚Ä¢ Stay connected with your home country's climate community
‚Ä¢ Share your cultural perspectives in appropriate settings
‚Ä¢ Maintain language skills and cultural practices
‚Ä¢ Connect with diaspora communities
‚Ä¢ Celebrate your heritage while embracing new experiences

**üí™ Overcoming Common Challenges:**

**Imposter Syndrome:**
‚Ä¢ Remember that your international background is valuable
‚Ä¢ Focus on your unique contributions and perspectives
‚Ä¢ Seek feedback to validate your performance
‚Ä¢ Connect with other international professionals
‚Ä¢ Celebrate your achievements and progress

**Communication Barriers:**
‚Ä¢ Practice English in professional contexts
‚Ä¢ Ask for clarification when needed
‚Ä¢ Use visual aids and written follow-ups
‚Ä¢ Join Toastmasters or similar groups
‚Ä¢ Consider accent reduction training if desired

**Cultural Misunderstandings:**
‚Ä¢ Approach differences with curiosity, not judgment
‚Ä¢ Ask questions to understand context
‚Ä¢ Share your cultural perspectives when appropriate
‚Ä¢ Find cultural bridges and common ground
‚Ä¢ Be patient with yourself and others

**üìö Resources for Integration:**

**Professional Development:**
‚Ä¢ **Toastmasters International**: Public speaking and leadership
‚Ä¢ **Professional Associations**: Field-specific networking
‚Ä¢ **LinkedIn Learning**: Professional skills development
‚Ä¢ **Local Chambers of Commerce**: Business networking

**Cultural Support:**
‚Ä¢ **International Centers**: Community support and programming
‚Ä¢ **Cultural Organizations**: Maintain connections to heritage
‚Ä¢ **Language Exchange Programs**: Improve English while helping others
‚Ä¢ **Diversity and Inclusion Groups**: Workplace support networks

**üå± Long-term Success Strategies:**

**Career Advancement:**
‚Ä¢ Understand promotion criteria and processes
‚Ä¢ Build relationships with decision-makers
‚Ä¢ Seek stretch assignments and leadership opportunities
‚Ä¢ Develop US-specific expertise while maintaining global perspective
‚Ä¢ Consider additional education or certifications

**Giving Back:**
‚Ä¢ Mentor other international professionals
‚Ä¢ Share your expertise with global climate initiatives
‚Ä¢ Contribute to diversity and inclusion efforts
‚Ä¢ Bridge connections between US and international organizations
‚Ä¢ Advocate for inclusive practices in your workplace

Remember: Cultural integration is a process, not a destination. Your international background brings valuable perspectives to the US climate movement. Be patient with yourself, stay curious, and remember that diversity of thought and experience strengthens our collective response to climate challenges.

What specific cultural or workplace challenges are you facing? I'm here to provide more targeted guidance and support."""

    async def _provide_networking_guidance(self, message: str, context: AgentContext) -> str:
        """Provide international networking and mentorship guidance"""
        return """üåê **Building Your International Climate Professional Network**

Networking is crucial for climate career success, especially as an international professional. Let me help you build meaningful connections and find mentorship opportunities.

**üéØ Strategic Networking Approach:**

**Understanding US Networking Culture:**
‚Ä¢ Relationship-building is key to career advancement
‚Ä¢ Professional networking is expected and valued
‚Ä¢ Quality of connections matters more than quantity
‚Ä¢ Mutual benefit and reciprocity are important
‚Ä¢ Follow-up and maintenance of relationships essential

**Your Networking Advantages:**
‚Ä¢ International perspective is highly valued in climate work
‚Ä¢ Global experience provides unique conversation starters
‚Ä¢ Multilingual abilities open doors to diverse networks
‚Ä¢ Cross-cultural competency is increasingly important
‚Ä¢ Fresh perspectives on US climate challenges

**üåç Climate-Specific Networking Opportunities:**

**Major Climate Conferences:**
‚Ä¢ **Climate Week NYC**: Annual September event with global attendance
‚Ä¢ **COP Climate Summits**: International climate negotiations
‚Ä¢ **ARPA-E Energy Innovation Summit**: Clean energy technology focus
‚Ä¢ **Intersolar North America**: Solar industry networking
‚Ä¢ **American Wind Energy Association (AWEA) Events**: Wind industry connections

**Professional Associations:**
‚Ä¢ **Association of Climate Change Officers (ACCO)**: Climate professionals
‚Ä¢ **International Association for Energy Economics (IAEE)**: Energy sector
‚Ä¢ **Air & Waste Management Association (A&WMA)**: Environmental professionals
‚Ä¢ **American Society of Adaptation Professionals (ASAP)**: Climate adaptation
‚Ä¢ **Women in Renewable Energy (WiRE)**: Gender-focused networking

**ü§ù Networking Strategies for International Professionals:**

**Preparation and Approach:**
```
Before Networking Events:
‚ñ° Research attendees and speakers
‚ñ° Prepare your elevator pitch
‚ñ° Set specific goals (e.g., meet 5 new people)
‚ñ° Bring business cards and LinkedIn QR code
‚ñ° Practice small talk and conversation starters
```

**Conversation Starters:**
‚Ä¢ "I'm originally from [country] and interested in how climate solutions differ globally..."
‚Ä¢ "I'd love to learn about your experience in the US climate sector..."
‚Ä¢ "What trends are you seeing in climate work here compared to internationally?"
‚Ä¢ "I'm new to the US climate community and would appreciate your insights..."

**Cultural Navigation:**
‚Ä¢ Be prepared for direct, informal communication
‚Ä¢ Share your international experience confidently
‚Ä¢ Ask questions about US-specific climate policies and markets
‚Ä¢ Offer your global perspective on climate challenges
‚Ä¢ Exchange contact information and follow up promptly

**üíº Professional Mentorship:**

**Finding Mentors:**
‚Ä¢ Look for professionals with international backgrounds
‚Ä¢ Seek mentors at different career stages
‚Ä¢ Consider reverse mentoring opportunities
‚Ä¢ Join formal mentorship programs
‚Ä¢ Build relationships gradually over time

**Types of Mentors You Need:**
‚Ä¢ **Industry Mentor**: Climate sector expertise and connections
‚Ä¢ **Cultural Mentor**: US workplace navigation and cultural integration
‚Ä¢ **Career Mentor**: Professional development and advancement guidance
‚Ä¢ **Peer Mentors**: Other international professionals in similar situations

**Mentorship Best Practices:**
‚Ä¢ Be clear about your goals and expectations
‚Ä¢ Respect mentors' time and expertise
‚Ä¢ Come prepared with specific questions
‚Ä¢ Follow through on advice and recommendations
‚Ä¢ Express gratitude and update on progress
‚Ä¢ Look for ways to give back and support others

**üåê Online Networking Strategies:**

**LinkedIn Optimization:**
```
Profile Enhancement:
‚Ä¢ Highlight international background as asset
‚Ä¢ Include climate-relevant keywords
‚Ä¢ Share insights from global perspective
‚Ä¢ Engage with climate content regularly
‚Ä¢ Connect with climate professionals actively
```

**Virtual Networking:**
‚Ä¢ Join climate-focused LinkedIn groups
‚Ä¢ Participate in Twitter climate conversations
‚Ä¢ Attend virtual conferences and webinars
‚Ä¢ Engage in online climate communities
‚Ä¢ Share relevant content and insights

**Digital Relationship Building:**
‚Ä¢ Comment thoughtfully on posts
‚Ä¢ Share relevant articles with personal insights
‚Ä¢ Congratulate connections on achievements
‚Ä¢ Offer help and expertise when appropriate
‚Ä¢ Schedule virtual coffee chats

**üè¢ Workplace Networking:**

**Internal Networking:**
‚Ä¢ Build relationships across departments
‚Ä¢ Participate in employee resource groups
‚Ä¢ Volunteer for cross-functional projects
‚Ä¢ Attend company social events
‚Ä¢ Seek informational interviews with colleagues

**External Professional Networking:**
‚Ä¢ Join local climate professional groups
‚Ä¢ Attend industry meetups and events
‚Ä¢ Participate in professional development workshops
‚Ä¢ Engage with clients and partners
‚Ä¢ Represent your organization at conferences

**üåü International Professional Communities:**

**Diaspora Networks:**
‚Ä¢ Connect with professionals from your home country
‚Ä¢ Join country-specific professional associations
‚Ä¢ Participate in cultural business networks
‚Ä¢ Attend embassy and consulate events
‚Ä¢ Build bridges between home and US markets

**Global Climate Networks:**
‚Ä¢ **Climate Professionals Network**: International online community
‚Ä¢ **Young Professionals in Energy**: Global energy sector networking
‚Ä¢ **International Solar Alliance**: Global solar industry connections
‚Ä¢ **Global Green Growth Institute**: International green growth network

**üì± Networking Tools and Platforms:**

**Essential Platforms:**
‚Ä¢ **LinkedIn**: Primary professional networking platform
‚Ä¢ **Meetup**: Local professional and interest groups
‚Ä¢ **Eventbrite**: Climate conferences and workshops
‚Ä¢ **Twitter**: Climate conversations and thought leadership
‚Ä¢ **Slack Communities**: Climate professional groups

**Networking Apps:**
‚Ä¢ **Shapr**: Professional networking app
‚Ä¢ **Bumble Bizz**: Business networking
‚Ä¢ **Coffee Meets Bagel**: Professional connections
‚Ä¢ **Luma**: Event discovery and networking

**üöÄ Networking Action Plan:**

**Month 1: Foundation Building**
‚Ä¢ Optimize LinkedIn profile
‚Ä¢ Join 3-5 relevant professional associations
‚Ä¢ Attend 2 local climate events
‚Ä¢ Reach out to 10 climate professionals for informational interviews

**Month 2-3: Relationship Development**
‚Ä¢ Follow up with new connections
‚Ä¢ Attend major climate conference
‚Ä¢ Join professional association committees
‚Ä¢ Seek mentorship opportunities

**Month 4-6: Network Expansion**
‚Ä¢ Speak at industry events
‚Ä¢ Write articles sharing international perspective
‚Ä¢ Mentor other international professionals
‚Ä¢ Build strategic partnerships

**üí° Networking Success Tips:**

**Quality over Quantity:**
‚Ä¢ Focus on building meaningful relationships
‚Ä¢ Invest time in nurturing connections
‚Ä¢ Provide value to your network
‚Ä¢ Be authentic and genuine in interactions
‚Ä¢ Remember personal details about connections

**Cultural Sensitivity:**
‚Ä¢ Respect different communication styles
‚Ä¢ Be patient with relationship building
‚Ä¢ Understand US business etiquette
‚Ä¢ Share your cultural insights appropriately
‚Ä¢ Bridge cultural gaps in professional settings

**Long-term Relationship Management:**
‚Ä¢ Stay in regular contact with key connections
‚Ä¢ Celebrate others' successes and milestones
‚Ä¢ Offer help and support when possible
‚Ä¢ Share relevant opportunities and information
‚Ä¢ Maintain relationships even when not actively job searching

Remember: Your international background is a networking asset, not a barrier. The climate sector values global perspectives and cross-cultural collaboration. Be confident in sharing your unique experiences and insights.

What specific networking challenges are you facing, and what type of connections would be most valuable for your climate career goals?"""

    async def _provide_language_support(self, message: str, context: AgentContext) -> str:
        """Provide language and communication support"""
        return """üó£Ô∏è **Professional English and Communication Support**

Strong communication skills are essential for climate career success. Let me help you enhance your professional English and cross-cultural communication abilities.

**üìà Assessing Your Communication Needs:**

**Professional English Skills:**
‚Ä¢ **Technical Writing**: Reports, proposals, and documentation
‚Ä¢ **Presentation Skills**: Public speaking and slide presentations
‚Ä¢ **Meeting Participation**: Contributing effectively in discussions
‚Ä¢ **Email Communication**: Professional correspondence
‚Ä¢ **Networking Conversations**: Building relationships through communication

**Climate-Specific Language:**
‚Ä¢ Industry terminology and acronyms
‚Ä¢ Policy and regulatory language
‚Ä¢ Technical and scientific vocabulary
‚Ä¢ Business and finance terminology
‚Ä¢ Communication with diverse stakeholders

**üíº Professional Communication Enhancement:**

**Business Writing Skills:**
```
Email Best Practices:
‚Ä¢ Clear, specific subject lines
‚Ä¢ Concise, well-organized content
‚Ä¢ Professional but friendly tone
‚Ä¢ Proper grammar and spelling
‚Ä¢ Appropriate level of formality

Report Writing:
‚Ä¢ Executive summary with key points
‚Ä¢ Clear structure and headings
‚Ä¢ Data-driven arguments
‚Ä¢ Professional formatting
‚Ä¢ Actionable recommendations
```

**Presentation Skills:**
‚Ä¢ Clear, logical structure
‚Ä¢ Engaging opening and closing
‚Ä¢ Visual aids that support content
‚Ä¢ Practice for smooth delivery
‚Ä¢ Handling questions confidently

**Meeting Participation:**
‚Ä¢ Prepare talking points in advance
‚Ä¢ Speak clearly and at appropriate pace
‚Ä¢ Ask clarifying questions when needed
‚Ä¢ Contribute unique perspectives
‚Ä¢ Follow up on action items

**üåç Climate Sector Communication:**

**Technical Communication:**
‚Ä¢ Learn key climate science terminology
‚Ä¢ Understand policy and regulatory language
‚Ä¢ Practice explaining complex concepts simply
‚Ä¢ Use data and evidence effectively
‚Ä¢ Adapt communication to audience level

**Stakeholder Communication:**
‚Ä¢ Tailor message to different audiences
‚Ä¢ Use appropriate level of technical detail
‚Ä¢ Consider cultural and regional differences
‚Ä¢ Practice active listening skills
‚Ä¢ Build rapport across cultural boundaries

**üéØ Language Development Strategies:**

**Formal Learning:**
‚Ä¢ **ESL Classes**: Community colleges and language schools
‚Ä¢ **Business English Courses**: Professional communication focus
‚Ä¢ **Online Platforms**: Coursera, edX, LinkedIn Learning
‚Ä¢ **University Programs**: Continuing education options
‚Ä¢ **Professional Coaching**: One-on-one language coaching

**Immersive Practice:**
‚Ä¢ **Toastmasters International**: Public speaking and leadership
‚Ä¢ **Professional Meetups**: Practice in real-world settings
‚Ä¢ **Volunteer Opportunities**: Build skills while giving back
‚Ä¢ **Book Clubs**: Improve reading and discussion skills
‚Ä¢ **Debate Groups**: Enhance argumentation and critical thinking

**üé§ Public Speaking and Presentation:**

**Overcoming Speaking Anxiety:**
‚Ä¢ Practice with supportive audiences
‚Ä¢ Record yourself to identify areas for improvement
‚Ä¢ Focus on message rather than perfection
‚Ä¢ Use visual aids to support your points
‚Ä¢ Prepare thoroughly to build confidence

**Accent and Pronunciation:**
‚Ä¢ Work with speech coach if desired
‚Ä¢ Practice with native speakers
‚Ä¢ Record and listen to your speech
‚Ä¢ Focus on clarity over accent reduction
‚Ä¢ Remember that accents can be assets

**Presentation Techniques:**
‚Ä¢ Start with strong opening
‚Ä¢ Use storytelling to engage audience
‚Ä¢ Include your international perspective
‚Ä¢ Practice transitions between points
‚Ä¢ End with clear call to action

**üìö Professional Development Resources:**

**Language Learning Apps:**
‚Ä¢ **Grammarly**: Writing assistance and grammar checking
‚Ä¢ **Hemingway Editor**: Clear, concise writing
‚Ä¢ **Pronunciation Coach**: Speech improvement
‚Ä¢ **FluentU**: Real-world English practice
‚Ä¢ **Cambly**: Conversation practice with native speakers

**Professional Communication:**
‚Ä¢ **Harvard Business Review**: Business communication articles
‚Ä¢ **TED Talks**: Presentation skills and content ideas
‚Ä¢ **Coursera Business Writing**: Professional writing courses
‚Ä¢ **LinkedIn Learning**: Communication skills development

**üåü Leveraging Your Multilingual Abilities:**

**Professional Advantages:**
‚Ä¢ Communicate with international stakeholders
‚Ä¢ Translate complex concepts across cultures
‚Ä¢ Bridge communication gaps in diverse teams
‚Ä¢ Access global climate information and research
‚Ä¢ Facilitate international partnerships

**Career Opportunities:**
‚Ä¢ International business development
‚Ä¢ Global climate policy and advocacy
‚Ä¢ Cross-cultural team leadership
‚Ä¢ International conference speaking
‚Ä¢ Multilingual content creation

**üí° Communication Confidence Building:**

**Practice Strategies:**
‚Ä¢ Join professional discussion groups
‚Ä¢ Volunteer to present at team meetings
‚Ä¢ Participate in Q&A sessions at events
‚Ä¢ Offer to lead training or workshops
‚Ä¢ Write articles or blog posts

**Feedback and Improvement:**
‚Ä¢ Ask trusted colleagues for communication feedback
‚Ä¢ Record presentations for self-evaluation
‚Ä¢ Seek mentorship from strong communicators
‚Ä¢ Take advantage of professional development opportunities
‚Ä¢ Practice regularly in low-stakes environments

**ü§ù Cross-Cultural Communication:**

**Cultural Bridge Building:**
‚Ä¢ Share international perspectives appropriately
‚Ä¢ Help colleagues understand global contexts
‚Ä¢ Facilitate communication in diverse teams
‚Ä¢ Translate cultural nuances when helpful
‚Ä¢ Build inclusive communication practices

**Navigating Differences:**
‚Ä¢ Understand direct vs. indirect communication styles
‚Ä¢ Adapt to different meeting and decision-making cultures
‚Ä¢ Respect varying approaches to hierarchy and authority
‚Ä¢ Bridge generational and cultural communication gaps
‚Ä¢ Practice cultural sensitivity in all interactions

**üìã Communication Development Plan:**

**Assessment (Week 1):**
‚Ä¢ Identify specific communication challenges
‚Ä¢ Set measurable improvement goals
‚Ä¢ Gather feedback from colleagues or mentors
‚Ä¢ Choose appropriate development resources

**Skill Building (Months 1-3):**
‚Ä¢ Enroll in relevant courses or coaching
‚Ä¢ Practice daily in professional settings
‚Ä¢ Join speaking or discussion groups
‚Ä¢ Seek feedback and adjust approach

**Application (Months 4-6):**
‚Ä¢ Volunteer for presentation opportunities
‚Ä¢ Lead meetings or training sessions
‚Ä¢ Write professional articles or reports
‚Ä¢ Mentor others in communication skills

**üî• Success Metrics:**
‚Ä¢ Increased confidence in professional communication
‚Ä¢ Positive feedback from colleagues and supervisors
‚Ä¢ Successful presentations and meeting participation
‚Ä¢ Enhanced networking and relationship building
‚Ä¢ Career advancement opportunities

Remember: Your multilingual abilities and international perspective are communication assets. Focus on clarity and authenticity rather than perfection. Many successful climate professionals have accents and diverse communication styles.

What specific communication challenges are you facing in your climate career? I can provide more targeted guidance and resources based on your needs."""

    async def _provide_general_international_guidance(
        self, message: str, context: AgentContext
    ) -> str:
        """Provide general international professional guidance"""
        return """üåç **Welcome to International Climate Career Support**

Hello! I'm Liv, and I'm here to support you as an international professional navigating climate careers in the United States. Your global perspective and diverse background are valuable assets in the climate movement.

**üåü My Specializations:**
‚Ä¢ **Credential Recognition**: Navigating evaluation and recognition of international qualifications
‚Ä¢ **Immigration Support**: Understanding visa options and pathways for climate careers
‚Ä¢ **Cultural Integration**: Adapting to US workplace culture while maintaining your identity
‚Ä¢ **Professional Networking**: Building meaningful connections in the climate sector
‚Ä¢ **Language Support**: Enhancing professional communication and presentation skills

**üéØ Why Your International Background Matters:**

**Global Climate Perspective:**
‚Ä¢ Climate change is a global challenge requiring international collaboration
‚Ä¢ Your experience with different climate impacts and solutions is valuable
‚Ä¢ Cross-cultural competency is increasingly important in climate work
‚Ä¢ International markets and policies are crucial to climate solutions
‚Ä¢ Diverse perspectives strengthen climate innovation and problem-solving

**Professional Advantages:**
‚Ä¢ Multilingual abilities for international stakeholder engagement
‚Ä¢ Understanding of global supply chains and markets
‚Ä¢ Experience with different regulatory and policy frameworks
‚Ä¢ Cultural competency for diverse team leadership
‚Ä¢ Fresh perspectives on US climate challenges and opportunities

**ü§ù How I Can Support You:**

**Practical Guidance:**
‚Ä¢ Credential evaluation and professional licensing processes
‚Ä¢ Visa and immigration pathways for climate careers
‚Ä¢ Job search strategies for international professionals
‚Ä¢ Salary negotiation and workplace navigation
‚Ä¢ Professional development and career advancement

**Cultural Support:**
‚Ä¢ Understanding US workplace culture and communication styles
‚Ä¢ Building professional networks and finding mentorship
‚Ä¢ Balancing cultural identity with professional integration
‚Ä¢ Overcoming common challenges faced by international professionals
‚Ä¢ Celebrating and leveraging your diverse background

**Career Development:**
‚Ä¢ Identifying climate career opportunities that value international experience
‚Ä¢ Translating global experience into US-relevant qualifications
‚Ä¢ Building skills and knowledge specific to US climate sector
‚Ä¢ Developing leadership and advancement strategies
‚Ä¢ Creating long-term career plans in climate work

**üå± Getting Started as an International Climate Professional:**

**Essential First Steps:**
1. **Assess Your Credentials**: Understand how your qualifications translate to US standards
2. **Research the Market**: Learn about US climate sector opportunities and requirements
3. **Build Your Network**: Connect with climate professionals and international communities
4. **Develop Language Skills**: Enhance professional communication abilities
5. **Understand Culture**: Learn about US workplace norms and expectations

**Key Questions to Consider:**
‚Ä¢ What type of climate work aligns with your background and interests?
‚Ä¢ What additional credentials or skills might strengthen your profile?
‚Ä¢ How can you best leverage your international experience?
‚Ä¢ What visa or immigration pathway is most appropriate for your situation?
‚Ä¢ Who can provide mentorship and guidance in your transition?

**üî• Common Challenges and Solutions:**

**Credential Recognition:**
‚Ä¢ Challenge: International degrees not recognized or understood
‚Ä¢ Solution: Obtain credential evaluation and highlight equivalent experience

**Cultural Adaptation:**
‚Ä¢ Challenge: Different workplace norms and communication styles
‚Ä¢ Solution: Seek mentorship and practice professional communication skills

**Network Building:**
‚Ä¢ Challenge: Limited professional connections in new country
‚Ä¢ Solution: Join professional associations and attend climate events

**Language Barriers:**
‚Ä¢ Challenge: Professional English and technical terminology
‚Ä¢ Solution: Take business English courses and practice in professional settings

**Immigration Complexity:**
‚Ä¢ Challenge: Navigating visa requirements and processes
‚Ä¢ Solution: Work with qualified immigration attorney and plan strategically

**üåü Success Stories:**

Many international professionals have built successful climate careers by:
‚Ä¢ Combining international credentials with US certifications
‚Ä¢ Leveraging global experience for international business development roles
‚Ä¢ Building strong professional networks through consistent engagement
‚Ä¢ Developing specialized expertise in climate technologies or policies
‚Ä¢ Starting their own climate-focused businesses or consulting practices

**üìö Essential Resources:**

**Professional Development:**
‚Ä¢ **Climate Professional Networks**: Join international climate communities
‚Ä¢ **Professional Associations**: Participate in climate sector organizations
‚Ä¢ **Continuing Education**: Take courses to build US-specific knowledge
‚Ä¢ **Mentorship Programs**: Find guidance from experienced professionals

**Immigration and Legal:**
‚Ä¢ **Immigration Attorneys**: Get qualified legal advice for your situation
‚Ä¢ **Credential Evaluation Services**: Obtain official assessment of qualifications
‚Ä¢ **Professional Licensing Boards**: Understand requirements for your field

**Cultural Integration:**
‚Ä¢ **International Centers**: Community support and programming
‚Ä¢ **Professional Development**: Business communication and networking skills
‚Ä¢ **Cultural Organizations**: Maintain connections while building new ones

**üéØ Next Steps:**
‚Ä¢ What specific aspect of your international transition would you like to focus on?
‚Ä¢ What type of climate career are you most interested in pursuing?
‚Ä¢ What challenges are you currently facing in your professional journey?
‚Ä¢ How can I best support you in achieving your climate career goals?

Remember: Your international background is not a barrier to overcome - it's a unique strength that the climate movement needs. The global nature of climate challenges requires professionals who understand diverse perspectives, cultures, and approaches to solutions.

I'm here to support you every step of the way. What would be most helpful for you to focus on first?"""

    async def _calculate_confidence(self, message: str, intent: str) -> float:
        """Calculate confidence score based on message analysis"""
        base_confidence = 0.8

        # Adjust based on intent specificity
        intent_adjustments = {
            "credential_recognition": 0.05,
            "visa_guidance": 0.04,
            "cultural_integration": 0.03,
            "international_networking": 0.04,
            "language_support": 0.03,
            "general_guidance": -0.05,
        }

        confidence = base_confidence + intent_adjustments.get(intent, 0)

        # Adjust based on international-related terminology
        international_terms = [
            "international",
            "visa",
            "credential",
            "culture",
            "language",
            "immigration",
        ]
        if any(term in message.lower() for term in international_terms):
            confidence += 0.03

        if len(message) > 100:
            confidence += 0.02

        return min(confidence, 1.0)

    async def _suggest_next_actions(self, intent: str, context: AgentContext) -> List[str]:
        """Suggest next actions based on intent and context"""
        base_actions = [
            "Research credential evaluation services",
            "Connect with international climate professionals",
            "Join professional associations in your field",
        ]

        intent_specific_actions = {
            "credential_recognition": [
                "Choose appropriate credential evaluation service",
                "Gather required documents for evaluation",
                "Research additional certifications that might strengthen your profile",
            ],
            "visa_guidance": [
                "Consult with qualified immigration attorney",
                "Research employers who sponsor visas in climate sector",
                "Prepare strong application materials highlighting climate expertise",
            ],
            "cultural_integration": [
                "Find mentors who can guide workplace navigation",
                "Join professional development programs",
                "Practice professional communication in low-stakes environments",
            ],
            "international_networking": [
                "Attend climate conferences and professional events",
                "Join international professional associations",
                "Connect with other international professionals in climate sector",
            ],
            "language_support": [
                "Enroll in business English or professional communication courses",
                "Join Toastmasters or similar speaking groups",
                "Practice professional presentations and writing",
            ],
        }

        return intent_specific_actions.get(intent, base_actions)


__all__ = ["LivAgent"]
